---
title: NamedTupleの末尾にコンマがあるとフォーマッタがおかしくなるやつを直した
---

# やったこと

## [#4697](https://github.com/crystal-lang/crystal/pull/4697)

`NamedTuple`の末尾にコンマがあるとフォーマッタがおかしくなるやつを直した。なんかそういうIssueがあがっていたので。

これは`NamedTuple`の名前付き引数のフォーマットに関数に名前付き引数を処理するやつを使ってるんだけど、これが末尾のコンマを処理しないので問題になる。

インデント周りもいい感じにしておいたけど、ここまでやる必要があったのかは永遠の謎。

## [#4698](https://github.com/crystal-lang/crystal/pull/4698)

前のエラーは明かに括弧のネストがおかしいコードを吐いてるのに正常終了していてそれがややこしかったので、そういう場合にエラーになるようにしたもの。そこまで重要じゃないけど価値はあると思うので。
