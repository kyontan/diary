---
title: バイトなどした
---

# やったこと

## バイトをした

ひさしぶりだけどどうにかやれた。Scalatestの`Table`の使い方よく分からん‥‥。

問題はここから感が強いのでどうにかしなきゃならない。

## bashcachedのテストの改良

ともかく安定してパスするように`sleep`を挟んだりして努力した。おかげで大分安定したと思う。

`retry_on_error`メソッドでbashcachedサーバーに繋ぎに行く際の些細なエラーをリトライするようにしたり、`exptime`のテストで`exptime: 2`を使うようにして読み出す前に消えてしまうことを回避したりした。`exptime`に関しては実はbashcachedのバグとも言えなくもなくて、例えばコンマ以下が.9秒くらいのタイミングで`exptime: 1`をセットすると、0.1秒の経過で値が消えてしまうことになる。これを回避するには`printf %(s)T -1`じゃなくて`date +%s.%N`みたいにコンマ以下の時間まで含めて時間を取得するようにすればいいのだけど`date`コマンドを呼ぶと外部コマンド呼び出しになってめっちゃ遅くなるのであまりやりたくない。悩みどころ。

そしてCircleCIで多発する`ENETUNREACH`は原因がまったく分からなかった。なんかcool downとかいって`sleep 0.1`をbashcachedの終了後に入れたら安定するようになった気がするけど気のせいかもしれない。謎。

残りのテストは明日にでも書きます。

## [#4726](https://github.com/crystal-lang/crystal/pull/4726)

文字列補間の末尾が改行で終ってるとエラーになるので`skip_space_or_newline`を挟んでおいた。

文字列補間の中で複数の式書けないのが気になるけどそれはそれで‥‥。

## [#4725](https://github.com/crystal-lang/crystal/issues/4725)

こっちは空の文字列補間がダメっていう話。複数の式が書けないのとも関係がある気がする。もうちょい反応を待ちたいなぁ。

# crystalの日本語ドキュメント

なんか@5t111111さんがdeprectedメッセージの表示に格闘していた。リバートのリバートは純粋に面白いので笑ってしまう。

## Goby

というプログラミング言語がある。Go言語で実装された一見Rubyのような文法のクオリティの低い言語だ。きわめてクオリティが低い。自分だったらこのクオリティでは絶対に世の中に出さないのだけど、それでも1000以上のスターがついている辺り出したもん勝ちなんだろうな、と思う。納得がいかない。

きわめてクオリティが低いので`inspect`メソッドが実装されていない。けどなぜか配列に対する`to_s`だけは`inspect`相当になっていたのでそれを使ってQuineを書いた。よく分からない。ハッシュはだめだった。よく分からない。

5秒触れただけでバグが3個は見つかるので少しくらいPull Requestを送るべきかもしれない。けどGo言語なんだよなぁ。

244言語目のQuineでした。
