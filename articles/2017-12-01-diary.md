---
title: ハガレン実写を観た
---

# やったこと

## ハガレン実写を観た

思っていたよりも面白かった。ストーリーの構成はいい落としどころを突いてると思う。ホムンクルス勢がコスプレっぽいのは致し方ないとして、マスタングとかヒューズはあれはあれでいいんじゃないかなと最後の方は感じていた。ディーンフジオカいいじゃん。

あと、個人的には最後にメインキャストが大きく表示されたのが良かった。あれがすごい好きなんだけど、日本の映画だとあまり見ない気がする。

色々と思うところはあるのだけど、結論としては「あーハガレン読みたいな」ってなる映画だったし、そういう意味では成功してるんじゃないかと思う。

## `foo`が変数のときに`foo(+1)`が`foo + 1`とパースされるのを修正

https://github.com/crystal-lang/crystal/pull/5336

完全に面白バグ。パーサーのコード読みながらまさかなぁと思って試してみると、そのまさかでバグっていて、とりあえず直した。実は元々直したかったのは、

```crystal
foo = 1
case 1
when foo then 1
end
```

の`when foo then`の`foo`がメソッド呼び出しになってしまう方だったりする。`when foo; 1`とかだとこうはならない。この辺の挙動は謎が多い‥。
